<header class="topbar">
  <div class="brand">CMS Admin</div>
  <div class="topbar-actions">
    <button class="btn" (click)="toggleSidebar()" aria-label="Toggle sidebar">
      <i class="bi bi-list"></i>
    </button>
    <!-- user area -->
    <div class="user-area">
      @if (getCurrentUser()) {
        <span class="user-name">{{ getCurrentUser()?.firstName }} {{ getCurrentUser()?.lastName }}</span>
        <button class="btn-logout" (click)="logout()" aria-label="Logout">
          <i class="bi bi-box-arrow-right"></i>
          <span>Logout</span>
        </button>
      }
    </div>
  </div>
</header>

<div class="app-shell" [class.sidebar-collapsed]="sidebarCollapsed()">
  <!-- Mobile overlay -->
  <div class="sidebar-overlay"
       [class.active]="!sidebarCollapsed() && isMobile()"
       (click)="closeSidebar()"></div>

  <nav class="sidebar" role="navigation" aria-label="Main navigation">
    <div class="sidebar-header">
      @if(!sidebarCollapsed()) {
        <h3>CMS Admin</h3>
      } @else {
        <h3>CMS</h3>
      }
    </div>

    <ul class="sidebar-menu">
      @for (item of menuItems(); track item.link) {
        <li class="menu-item">
          <a [routerLink]="item.link"
             class="menu-link"
             routerLinkActive="active"
             [attr.data-label]="item.label"
             (click)="onMenuClick()">
            <i class="{{ item.icon }}"></i>
            @if(!sidebarCollapsed()) {
              <span>{{ item.label }}</span>
            }
          </a>
        </li>
      }
    </ul>

    <div class="sidebar-footer">
      <button class="sidebar-toggle" (click)="toggleSidebar()" aria-label="Toggle sidebar">
        <i class="bi" [class.bi-chevron-left]="!sidebarCollapsed()" [class.bi-chevron-right]="sidebarCollapsed()"></i>
        @if(!sidebarCollapsed()) {
          <span>Collapse</span>
        }
      </button>
    </div>
  </nav>

  <main class="main-content" role="main">
    <router-outlet />
  </main>
</div>
