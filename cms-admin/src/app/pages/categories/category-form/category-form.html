<div class="category-form-container">
  <div class="form-header">
    <h1>@if (isEditing()) { Edit Category } @else { Create New Category }</h1>
    <p>@if (isEditing()) { Update category information } @else { Add a new category to organize your content }</p>
  </div>

  @if (loading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading category...</p>
    </div>
  } @else {
    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="category-form">
      @if (error()) {
        <div class="error-alert">
          <i class="fas fa-exclamation-triangle"></i>
          {{ error() }}
        </div>
      }

      <div class="form-grid">
        <!-- Name Field -->
        <div class="form-group">
          <label for="name" class="form-label">
            Category Name <span class="required">*</span>
          </label>
          <input
            type="text"
            id="name"
            formControlName="name"
            class="form-control"
            [class.error]="isFieldInvalid('name')"
            placeholder="Enter category name"
          />
          @if (getFieldError('name')) {
            <div class="field-error">{{ getFieldError('name') }}</div>
          }
        </div>

        <!-- Slug Field -->
        <div class="form-group">
          <label for="slug" class="form-label">
            Slug <span class="required">*</span>
          </label>
          <input
            type="text"
            id="slug"
            formControlName="slug"
            class="form-control"
            [class.error]="isFieldInvalid('slug')"
            placeholder="category-slug"
          />
          <div class="field-hint">URL-friendly version of the name</div>
          @if (getFieldError('slug')) {
            <div class="field-error">{{ getFieldError('slug') }}</div>
          }
        </div>

        <!-- Description Field -->
        <div class="form-group full-width">
          <label for="description" class="form-label">Description</label>
          <textarea
            id="description"
            formControlName="description"
            class="form-control"
            [class.error]="isFieldInvalid('description')"
            placeholder="Brief description of this category (optional)"
            rows="4"
          ></textarea>
          @if (getFieldError('description')) {
            <div class="field-error">{{ getFieldError('description') }}</div>
          }
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="onCancel()"
          [disabled]="saving()"
        >
          Cancel
        </button>
        
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="categoryForm.invalid || saving()"
        >
          @if (saving()) {
            <i class="fas fa-spinner fa-spin"></i>
            @if (isEditing()) { Updating... } @else { Creating... }
          } @else {
            @if (isEditing()) { Update Category } @else { Create Category }
          }
        </button>
      </div>
    </form>
  }
</div>
